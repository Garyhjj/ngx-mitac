<nz-tabset [(nzSelectedIndex)]="tabIdx">
  <nz-tab>
    <ng-template #nzTabHeading>
      {{'insoectionModule.nightDuty' | translate}}
    </ng-template>
    <app-data-drive [name]="'inspectionScheduleLine'" (dataDriveInit)="getDataDrive2($event)"></app-data-drive>
  </nz-tab>
  <nz-tab>
    <ng-template #nzTabHeading>
      {{'insoectionModule.safeDuty' | translate}}
    </ng-template>
    <app-data-drive [name]="'inspectionScheduleLine'" (dataDriveInit)="getDataDrive3($event)"></app-data-drive>
  </nz-tab>
  <nz-tab>
    <ng-template #nzTabHeading>
      7S
    </ng-template>
    <app-data-drive [name]="'inspectionScheduleLine4'" (dataDriveInit)="getDataDrive4($event)"></app-data-drive>
  </nz-tab>
</nz-tabset>

<nz-modal [nzVisible]="isVisible" nzTitle="{{'insoectionModule.schedule' | translate}}" [nzContent]="modalContent" [nzFooter]="modalFooter"
  (nzOnCancel)="isVisible = false">
  <ng-template #modalContent>
    <form nz-form [nzLayout]="formLayout" [formGroup]="scheduleForm" *ngIf="scheduleForm">
      <ng-container *ngIf="tabIdx === 2">
        <div nz-form-item nz-row>
          <div nz-form-label nz-col [nzSpan]="6">
            <label>*{{'insoectionModule.inspectionWeek' | translate}}</label>
          </div>
          <div nz-form-control nz-col [nzSpan]="16">
            <app-mx-select myPlaceHolder="{{'insoectionModule.selectInspectionWeek' | translate}}" [options]="weekOption" formControlName="SCHEDULE_NAME"></app-mx-select>
          </div>
        </div>
        <div nz-form-item nz-row>
          <div nz-form-label nz-col [nzSpan]="6">
            <label>*{{'insoectionModule.location2' | translate}}</label>
          </div>
          <div nz-form-control nz-col [nzSpan]="16">
            <app-mx-select myPlaceHolder="{{'insoectionModule.selectLocation' | translate}}" [lazyAPI]="'IPQA/GetMRILookup?lookup_type=7S_LOCATION'"
              [lazyParams]="['LOOKUP_CODE', 'LOOKUP_CODE']" formControlName="AREA"></app-mx-select>
          </div>
        </div>
      </ng-container>
      <div nz-form-item nz-row *ngIf="tabIdx !== 2">
        <div nz-form-label nz-col [nzSpan]="6">
          <label>*{{'insoectionModule.dutyDay' | translate}}</label>
        </div>
        <div nz-form-control nz-col [nzSpan]="16">
          <app-my-date-picker formControlName="FROM_DATE"></app-my-date-picker>
        </div>
      </div>

      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="6">
          <label>*{{'insoectionModule.startTime' | translate}}</label>
        </div>
        <div nz-form-control nz-col [nzSpan]="16">
          <app-my-time-picker myPickerFormat="HH:mm" myFormat="HH:mm" formControlName="FROM_TIME"></app-my-time-picker>
        </div>
      </div>

      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="6">
          <label>*{{'insoectionModule.endTime' | translate}}</label>
        </div>
        <div nz-form-control nz-col [nzSpan]="16">
          <app-my-time-picker myPickerFormat="HH:mm" myFormat="HH:mm" formControlName="TO_TIME"></app-my-time-picker>
          <div nz-form-explain class="has-error">{{timeErr}}</div>
        </div>
      </div>
      <ng-container formArrayName="empnos">
        <ng-container *ngFor="let ctrl of scheduleForm.controls['empnos'].controls; let i = index;">
          <div nz-form-control nz-col [formGroupName]="i">
            <div nz-form-label nz-col [nzSpan]="6">
              <label>*{{'insoectionModule.inspector' | translate}}{{i+1}}</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="16">
              <app-colleague-searcher style="width: 60%; margin-right:8px;" formControlName="person">
              </app-colleague-searcher>
              <i class="anticon anticon-minus-circle-o dynamic-delete-button" (click)="cancleEmp(i)" *ngIf="i !==0"></i>
            </div>
          </div>
        </ng-container>
      </ng-container>

      <div nz-form-item nz-row>
        <div nz-form-control nz-col [nzOffset]="6">
          <button nz-button [nzType]="'dashed'" [nzSize]="'large'" style="width:60%" (click)="addEmp()">
            <i class="anticon anticon-plus"></i>
            <span> {{'insoectionModule.addInspector' | translate}}</span>
          </button>
        </div>
      </div>

      <div nz-form-item nz-row [style.display]="'block'">
        <button nz-button nz-col [nzOffset]="6" [nzSpan]="12" type="submit" [nzType]="'primary'" [nzSize]="'large'" (click)="submitForm()"
          [disabled]="!scheduleForm.valid">{{'confirm' | translate}}</button>
      </div>
    </form>
  </ng-template>
  <ng-template #modalFooter>

  </ng-template>
</nz-modal>
