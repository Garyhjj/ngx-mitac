<!-- <nz-table *ngIf="_dataDrive && setDetail" #nzTable [nzScroll]="setDetail.fixedHeader?.enable?{ y: setDetail.fixedHeader.scrollHeight>0?setDetail.fixedHeader.scrollHeight: 300 }:null"
  [nzDataSource]="tableData.data?tableData.data:[]" [nzPageSize]="setDetail.pageSet.count" [nzBordered]="setDetail.border_y.enable"
  [nzLoading]="_loading" [nzIsPagination]="setDetail.pageSet.enable" [nzShowFooter]="setDetail.footer.enable" [nzShowTitle]="setDetail.title.enable && !isModal"
  [nzSize]="setDetail.size" (nzDataChange)="dataChange()" [(nzPageIndex)]="pageIndex" [nzShowTotal]="1"> -->
<nz-table *ngIf="_dataDrive && setDetail" #nzTable [nzScroll]="setDetail.fixedHeader?.enable?{ y: setDetail.fixedHeader.scrollHeight>0?setDetail.fixedHeader.scrollHeight: 300 }:null"
  [nzDataSource]="tableData.data?tableData.data:[]" [nzPageSize]="setDetail.pageSet.count" [nzBordered]="setDetail.border_y.enable"
  [nzLoading]="_loading" [nzIsPagination]="setDetail.pageSet.enable" [nzShowFooter]="setDetail.footer.enable" [nzShowTitle]="false"
  [nzSize]="setDetail.size" (nzDataChange)="dataChange()" [(nzPageIndex)]="pageIndex" [nzShowTotal]="1">
  <span nz-table-title>{{tableSet.title}}</span>
  <ng-template #nzFixedHeader [ngIf]="_header&&!setDetail.fixedHeader?.enable&&tableData">
    <thead nz-thead>
      <tr>
        <th nz-th *ngFor="let item of tableData.columns;let i = index" [ngStyle]="_headerCellStyle(item)" [nzWidth]="setDetail.fixedHeader?.enable &&setDetail.fixedHeader?.width && setDetail.fixedHeader?.width[i]?setDetail.fixedHeader?.width[i]:!setDetail.fixedHeader?'':(100/(tableData.columns.length+additionalColNum)) + '%'">
          <span *ngIf="!headerCellRef">{{item.value | sgChineseConv}}</span>
          <ng-template [ngTemplateOutlet]="headerCellRef" [ngTemplateOutletContext]="{$implicit: item}" *ngIf="headerCellRef"></ng-template>
          <nz-table-sort (nzValueChange)="sort(item.property, $event, item.more.sortBy)" *ngIf="item.more && item.more.sortBy"></nz-table-sort>
        </th>
        <th nz-th [ngStyle]="_headerCellStyle({})" [nzWidth]="setDetail.fixedHeader?.enable &&setDetail.fixedHeader?.width && setDetail.fixedHeader?.width[i]?setDetail.fixedHeader?.width[i]:!setDetail.fixedHeader?'':(100/(tableData.columns.length+additionalColNum)) + '%'"
          *ngIf="setDetail.showAction">
          <span>Action</span>
        </th>
      </tr>
    </thead>
  </ng-template>
  <tbody nz-tbody (mouseenter)="mouseEnter()" (mouseleave)="mouseLeave()">
    <tr nz-tbody-tr *ngFor="let data of nzTable.data;let i = index; trackBy: trackByIndex">
      <ng-container *ngFor="let item of data">
        <td [ngStyle]="runRegExp(i, setDetail.body, item.property)" nz-td *ngIf="!item.hide">
          <ng-container [ngSwitch]="types[item.property]">
            <div *ngSwitchCase="'img'">
              <button nz-button [nzType]="'primary'" *ngIf="item.value" (click)="scanImgs(item.value)">
                <span>瀏覽圖片</span>
              </button>
            </div>
            <ng-container *ngSwitchCase="'self'">
              <ng-template [ngTemplateOutlet]="tableCell" [ngTemplateOutletContext]="{data: arrayToObjectForData(i), property: item.property}"
                *ngIf="tableCell"></ng-template>
              <span *ngIf="!tableCell">{{item.value | myFlex: (pipes && pipes[item.property]?pipes[item.property]:'') | async }}</span>
            </ng-container>
            <span *ngSwitchDefault>{{item.value | myFlex: (pipes && pipes[item.property]?pipes[item.property]:'') | async }}</span>
          </ng-container>
        </td>
      </ng-container>
      <td [ngStyle]="runRegExp(i, setDetail.body,'')" nz-td *ngIf="setDetail.showAction">
        <span>
          <a *ngIf="canEdit" (click)="toUpdate(i)">修改</a>
          <span nz-table-divider *ngIf="canEdit && canDelete"></span>
          <a *ngIf="canDelete" (click)="toDelete(i)">刪除</a>
          <ng-container *ngIf="setDetail.paramsOut">
            <span nz-table-divider *ngIf="canEdit || canDelete"></span>
            <a (click)="paramsOut(setDetail.paramsOut.params,i)">{{setDetail.paramsOut.name}}</a>
          </ng-container>
          <ng-container *ngIf="setDetail.linkToPhone">
            <span nz-table-divider *ngIf="canEdit || canDelete || setDetail.paramsOut"></span>
            <a (click)="linkToPhone(setDetail.linkToPhone,i)">{{setDetail.linkToPhone.name}}</a>
          </ng-container>
        </span>
        <ng-template [ngTemplateOutlet]="actionRef" [ngTemplateOutletContext]="{data: arrayToObjectForData(i)}" *ngIf="actionRef"></ng-template>
      </td>
    </tr>
  </tbody>
  <span nz-table-footer>{{setDetail.footer.content}}</span>
</nz-table>

<app-photo-viewer [imgList]="fileList" [myShowInformer]="showInformer"></app-photo-viewer>
