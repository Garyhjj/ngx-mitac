<nz-table *ngIf="_dataDrive && setDetail" #nzTable [nzScroll]="setDetail.fixedHeader?.enable?{ y: setDetail.fixedHeader.scrollHeight>0?setDetail.fixedHeader.scrollHeight: 300 }:null"
  [nzDataSource]="tableData.data?tableData.data:[]" [nzPageSize]="setDetail.pageSet.count" [nzBordered]="setDetail.border_y.enable"
  [nzLoading]="_loading" [nzIsPagination]="setDetail.pageSet.enable" [nzShowFooter]="setDetail.footer.enable" [nzShowTitle]="setDetail.title.enable && !isModal"
  [nzSize]="setDetail.size" (nzDataChange)="dataChange()" [(nzPageIndex)]="pageIndex" [nzShowTotal]="1">
  <span nz-table-title>{{tableSet.title}}</span>
  <ng-template #nzFixedHeader [ngIf]="_header&&!setDetail.fixedHeader?.enable&&tableData">
    <thead nz-thead>
      <tr>
        <th nz-th [style.backgroundColor]="setDetail.header?setDetail.header.bgColor:''" [style.color]="setDetail.header?setDetail.header.textColor:''"
          [style.fontSize]="setDetail.header?setDetail.header.textSize:''" *ngFor="let item of tableData.columns;let i = index"
          [nzWidth]="setDetail.fixedHeader?.enable &&setDetail.fixedHeader?.width && setDetail.fixedHeader?.width[i]?setDetail.fixedHeader?.width[i]:!setDetail.fixedHeader?'':(100/(tableData.columns.length+additionalColNum)) + '%'">
          <span>{{item.value}}</span>
          <nz-table-sort (nzValueChange)="sort(item.property, $event, item.more.sortBy)" *ngIf="item.more && item.more.sortBy"></nz-table-sort>
        </th>
        <th nz-th [style.backgroundColor]="setDetail.header?setDetail.header.bgColor:''" [style.color]="setDetail.header?setDetail.header.textColor:''"
          [style.fontSize]="setDetail.header?setDetail.header.textSize:''" [nzWidth]="setDetail.fixedHeader?.enable &&setDetail.fixedHeader?.width && setDetail.fixedHeader?.width[i]?setDetail.fixedHeader?.width[i]:!setDetail.fixedHeader?'':(100/(tableData.columns.length+additionalColNum)) + '%'"
          *ngIf="setDetail.showAction">
          <span>action</span>
        </th>
      </tr>
    </thead>
  </ng-template>
  <tbody nz-tbody (mouseenter)="mouseEnter()" (mouseleave)="mouseLeave()">
    <tr nz-tbody-tr *ngFor="let data of nzTable.data;let i = index">
      <ng-container *ngFor="let item of data">
        <td [style.backgroundColor]="setDetail.body?runRegExp(i, setDetail.body, 'bgColor'):''" [style.fontSize]="setDetail.body?runRegExp(i, setDetail.body, 'textSize'):''"
          [style.color]="setDetail.body?runRegExp(i, setDetail.body, 'textColor'):''" nz-td *ngIf="!item.hide">{{item.value | myFlex: pipes && pipes[item.property]?pipes[item.property]:'' }}</td>
      </ng-container>
      <td [style.backgroundColor]="setDetail.body?runRegExp(i, setDetail.body, 'bgColor'):''" [style.fontSize]="setDetail.body?runRegExp(i, setDetail.body, 'textSize'):''"
        [style.color]="setDetail.body?runRegExp(i, setDetail.body, 'textColor'):''" nz-td *ngIf="setDetail.showAction">
        <span>
          <a  *ngIf="canEdit" (click)="toUpdate(i)">修改</a>
          <span nz-table-divider></span>
          <a  *ngIf="canDelete" (click)="toDelete(i)">刪除</a>
          <ng-container *ngIf="setDetail.paramsOut">
            <span nz-table-divider></span>
            <a (click)="paramsOut(setDetail.paramsOut.params,i)">{{setDetail.paramsOut.name}}</a>
          </ng-container>
          <ng-container *ngIf="setDetail.linkToPhone">
            <span nz-table-divider></span>
            <a (click)="linkToPhone(setDetail.linkToPhone.url,i)">{{setDetail.linkToPhone.name}}</a>
          </ng-container>
        </span>
      </td>
    </tr>
  </tbody>
  <span nz-table-footer>{{setDetail.footer.content}}</span>
</nz-table>
